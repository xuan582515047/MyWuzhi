---
description: 
alwaysApply: true
enabled: true
updatedAt: 2025-12-10T15:09:54.843Z
provider: 
---

# é¡¹ç›®ä»£ç å’Œæ³¨é‡Šè§„èŒƒ

## é€‚ç”¨èŒƒå›´
é€‚ç”¨äº wuzhi é¡¹ç›®çš„æ‰€æœ‰ä»£ç ç¼–å†™ï¼ŒåŒ…æ‹¬ Kotlin Spring Boot åç«¯å’Œ Vue.js å‰ç«¯çš„ä»£ç å’Œæ³¨é‡Šè§„èŒƒã€‚

## æ€»åˆ™

### 1. ä»£ç å¯è¯»æ€§åŸåˆ™
- ä»£ç åº”å½“è‡ªæ–‡æ¡£åŒ–ï¼Œæ³¨é‡Šåº”è§£é‡Š"ä¸ºä»€ä¹ˆ"è€Œé"æ˜¯ä»€ä¹ˆ"
- éµå¾ªè¯­è¨€å’Œæ¡†æ¶çš„å®˜æ–¹ç¼–ç è§„èŒƒ
- ä¿æŒä»£ç é£æ ¼ä¸€è‡´æ€§
- ä¼˜å…ˆä½¿ç”¨æ¸…æ™°çš„è¡¨è¾¾è€Œéå·§å¦™çš„æŠ€å·§

### 2. æ³¨é‡ŠåŸåˆ™
- æ³¨é‡Šå¿…é¡»ä¸ä»£ç ä¿æŒåŒæ­¥æ›´æ–°
- é¿å…æ³¨é‡Šè¿‡å¤šçš„æ˜¾è€Œæ˜“è§çš„ä»£ç 
- æ³¨é‡Šåº”å½“å‡†ç¡®ã€ç®€æ´ã€æ¸…æ™°
- ä½¿ç”¨ç»Ÿä¸€çš„æ³¨é‡Šæ ¼å¼å’Œè¯­è¨€ï¼ˆä¸­æ–‡ï¼‰

## åç«¯ Kotlin ä»£ç è§„èŒƒ

### 1. æ–‡ä»¶å’Œç±»æ³¨é‡Šè§„èŒƒ

#### 1.1 æ–‡ä»¶å¤´æ³¨é‡Š
æ¯ä¸ª Kotlin æ–‡ä»¶éƒ½åº”åŒ…å«æ–‡ä»¶å¤´æ³¨é‡Šï¼š

```kotlin
/**
 * [åŠŸèƒ½æ¨¡å—æè¿°]
 * 
 * @author [ä½œè€…å]
 * @since [åˆ›å»ºæ—¥æœŸ]
 * @version [ç‰ˆæœ¬å·]
 */
package com.wuzhi.server.xxx

// å¯¼å…¥è¯­å¥
```

#### 1.2 ç±»æ³¨é‡Š
```kotlin
/**
 * [ç±»åŠŸèƒ½ç®€è¿°]
 * 
 * è¯¦ç»†æè¿°ç±»çš„èŒè´£ã€ä½¿ç”¨åœºæ™¯ã€è®¾è®¡æ€è·¯ç­‰ã€‚
 * å¯ä»¥åŒ…å«ä½¿ç”¨ç¤ºä¾‹æˆ–é‡è¦çš„è®¾è®¡å†³ç­–è¯´æ˜ã€‚
 * 
 * @param [æ„é€ å‡½æ•°å‚æ•°æè¿°]
 * @property [å±æ€§æè¿°]
 * @see [ç›¸å…³ç±»æˆ–æ–‡æ¡£]
 * @since [åˆ›å»ºæ—¶é—´]
 */
@Service
class UserServiceImpl(
    private val userRepository: UserRepository,
    private val passwordUtil: PasswordUtil
) : UserService {
    // ç±»å®ç°
}
```

#### 1.3 æ¥å£æ³¨é‡Š
```kotlin
/**
 * [æ¥å£åŠŸèƒ½ç®€è¿°]
 * 
 * å®šä¹‰äº†[å…·ä½“åŠŸèƒ½]çš„ç›¸å…³æ“ä½œæ¥å£ã€‚
 * å®ç°ç±»åº”å½“éµå¾ª[ç‰¹å®šçš„è¡Œä¸ºçº¦å®š]ã€‚
 * 
 * @author [ä½œè€…å]
 * @since [åˆ›å»ºæ—¶é—´]
 */
interface UserService {
    /**
     * [æ–¹æ³•åŠŸèƒ½ç®€è¿°]
     * 
     * è¯¦ç»†æè¿°æ–¹æ³•çš„è¡Œä¸ºã€å‚æ•°è¦æ±‚ã€è¿”å›å€¼æ ¼å¼ã€
     * å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç­‰ã€‚
     * 
     * @param username ç”¨æˆ·åï¼Œé•¿åº¦é™åˆ¶3-50ä¸ªå­—ç¬¦
     * @param password å¯†ç ï¼Œå¿…é¡»ç»è¿‡åŠ å¯†
     * @return ç”¨æˆ·ä¿¡æ¯DTOï¼Œä¸åŒ…å«æ•æ„Ÿä¿¡æ¯
     * @throws BusinessException å½“ç”¨æˆ·åå·²å­˜åœ¨æ—¶æŠ›å‡º
     * @throws ValidationException å½“å‚æ•°éªŒè¯å¤±è´¥æ—¶æŠ›å‡º
     */
    fun createUser(username: String, password: String): UserDTO
}
```

### 2. æ–¹æ³•æ³¨é‡Šè§„èŒƒ

#### 2.1 å…¬å…±æ–¹æ³•æ³¨é‡Š
```kotlin
/**
 * éªŒè¯ç”¨æˆ·ç™»å½•å‡­è¯
 * 
 * æ ¹æ®æä¾›çš„ç”¨æˆ·åå’Œå¯†ç éªŒè¯ç”¨æˆ·èº«ä»½ï¼ŒéªŒè¯æˆåŠŸå
 * ç”ŸæˆJWTä»¤ç‰Œå¹¶è¿”å›ç”¨æˆ·ä¿¡æ¯ã€‚æ­¤æ–¹æ³•ä¼šè®°å½•ç™»å½•æ—¥å¿—ï¼Œ
 * å¯¹äºå¤šæ¬¡å¤±è´¥çš„ç™»å½•å°è¯•ä¼šè§¦å‘å®‰å…¨é¢„è­¦ã€‚
 * 
 * @param loginDTO ç™»å½•ä¿¡æ¯ï¼ŒåŒ…å«ç”¨æˆ·åå’Œå¯†ç 
 * @return ç™»å½•ç»“æœï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯å’ŒJWTä»¤ç‰Œ
 * @throws AuthenticationException å½“è®¤è¯å¤±è´¥æ—¶æŠ›å‡º
 * @throws AccountLockedException å½“è´¦æˆ·è¢«é”å®šæ—¶æŠ›å‡º
 */
fun authenticateUser(loginDTO: LoginDTO): AuthResult {
    // å®ç°é€»è¾‘
}
```

#### 2.2 ç§æœ‰æ–¹æ³•æ³¨é‡Š
```kotlin
// ç”ŸæˆJWTä»¤ç‰Œï¼Œè®¾ç½®æœ‰æ•ˆæœŸ24å°æ—¶
private fun generateToken(user: User): String {
    return JwtUtil.generate(user.id, user.username, Duration.ofHours(24))
}

// æ£€æŸ¥å¯†ç å¼ºåº¦ï¼Œå¿…é¡»åŒ…å«å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
private fun validatePasswordStrength(password: String): Boolean {
    return password.matches(Regex("^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$"))
}
```

### 3. å­—æ®µå’Œå¸¸é‡æ³¨é‡Šè§„èŒƒ

```kotlin
class UserPO {
    /**
     * ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦
     * æ ¼å¼ï¼šUUID v4
     */
    @TableId("id")
    val id: String? = null
    
    /**
     * ç”¨æˆ·å
     * é•¿åº¦é™åˆ¶ï¼š3-50ä¸ªå­—ç¬¦
     * å”¯ä¸€çº¦æŸï¼šå…¨å±€å”¯ä¸€
     */
    @TableField("username")
    val username: String,
    
    /**
     * å¯†ç å“ˆå¸Œå€¼
     * å­˜å‚¨æ ¼å¼ï¼šBCrypt
     * æ°¸è¿œä¸è¦æ˜æ–‡å­˜å‚¨å¯†ç 
     */
    @TableField("password_hash")
    val passwordHash: String
}

companion object {
    /** ç”¨æˆ·åæœ€å°é•¿åº¦ */
    const val MIN_USERNAME_LENGTH = 3
    
    /** ç”¨æˆ·åæœ€å¤§é•¿åº¦ */
    const val MAX_USERNAME_LENGTH = 50
    
    /** JWTä»¤ç‰Œé»˜è®¤æœ‰æ•ˆæœŸï¼ˆå°æ—¶ï¼‰ */
    const val TOKEN_DEFAULT_EXPIRE_HOURS = 24
}
```

### 4. MyBatis-Plus æ•°æ®åº“æ“ä½œè§„èŒƒ

#### 4.1 åŸºæœ¬åŸåˆ™
- **å¼ºåˆ¶ä½¿ç”¨ MyBatis-Plus**ï¼šæ‰€æœ‰å•è¡¨æ•°æ®åº“æ“ä½œå¿…é¡»ä½¿ç”¨ MyBatis-Plus æä¾›çš„ API
- **ç¦æ­¢æ˜¾å¼ SQL**ï¼šé™¤å¤šè¡¨è”æŸ¥å¤–ï¼Œä¸¥ç¦åœ¨ä»£ç ä¸­ç¼–å†™æ˜¾å¼ SQL è¯­å¥
- **ä¼˜å…ˆä½¿ç”¨å†…ç½®æ–¹æ³•**ï¼šå……åˆ†åˆ©ç”¨ MyBatis-Plus çš„å†…ç½® CRUD æ–¹æ³•
- **ç»Ÿä¸€ä½¿ç”¨æ³¨è§£é…ç½®**ï¼šå®ä½“ç±»æ˜ å°„å…³ç³»ä½¿ç”¨æ³¨è§£è€Œé XML é…ç½®

#### 4.2 å®ä½“ç±»æ³¨è§£è§„èŒƒ

```kotlin
/**
 * ç”¨æˆ·å®ä½“ç±»
 * 
 * å¯¹åº”æ•°æ®åº“è¡¨ data_userï¼Œå­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯å’Œè®¤è¯ç›¸å…³æ•°æ®ã€‚
 * ä½¿ç”¨ MyBatis-Plus æ³¨è§£è¿›è¡Œ ORM æ˜ å°„é…ç½®ã€‚
 */
@TableName("data_user") // å¿…é¡»æŒ‡å®šè¡¨å
data class UserPO(
    /**
     * ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦
     * ä½¿ç”¨é›ªèŠ±ç®—æ³•ç”Ÿæˆçš„ä¸»é”®
     */
    @TableId(value = "id", type = IdType.ASSIGN_ID) // å¿…é¡»æŒ‡å®šä¸»é”®å’Œç”Ÿæˆç­–ç•¥
    val id: String? = null,
    
    /**
     * ç”¨æˆ·å
     * å…¨å±€å”¯ä¸€ï¼Œç”¨äºç™»å½•è®¤è¯
     */
    @TableField("username") // å¿…é¡»æŒ‡å®šå­—æ®µå
    val username: String,
    
    /**
     * å¯†ç å“ˆå¸Œå€¼
     * BCrypt åŠ å¯†å­˜å‚¨
     */
    @TableField("password_hash")
    val passwordHash: String,
    
    /**
     * é‚®ç®±åœ°å€
     * å¯é€‰å­—æ®µï¼Œç”¨äºæ‰¾å›å¯†ç 
     */
    @TableField("email")
    val email: String? = null,
    
    /**
     * ç”¨æˆ·çŠ¶æ€
     * 0-æ­£å¸¸ 1-ç¦ç”¨ 2-å·²åˆ é™¤
     */
    @TableField("status")
    val status: Int = 0,
    
    /**
     * åˆ›å»ºæ—¶é—´
     * è‡ªåŠ¨å¡«å……å½“å‰æ—¶é—´
     */
    @TableField(value = "create_time", fill = FieldFill.INSERT)
    val createTime: LocalDateTime? = null,
    
    /**
     * æ›´æ–°æ—¶é—´
     * è‡ªåŠ¨å¡«å……å½“å‰æ—¶é—´
     */
    @TableField(value = "update_time", fill = FieldFill.INSERT_UPDATE)
    val updateTime: LocalDateTime? = null
) {
    companion object {
        /** ç”¨æˆ·åæœ€å¤§é•¿åº¦ */
        const val MAX_USERNAME_LENGTH = 50
        
        /** é‚®ç®±æœ€å¤§é•¿åº¦ */
        const val MAX_EMAIL_LENGTH = 100
        
        /** ç”¨æˆ·çŠ¶æ€ï¼šæ­£å¸¸ */
        const val STATUS_NORMAL = 0
        
        /** ç”¨æˆ·çŠ¶æ€ï¼šç¦ç”¨ */
        const val STATUS_DISABLED = 1
        
        /** ç”¨æˆ·çŠ¶æ€ï¼šå·²åˆ é™¤ */
        const val STATUS_DELETED = 2
    }
}
```

#### 4.3 Mapper æ¥å£è§„èŒƒ

```kotlin
/**
 * ç”¨æˆ·æ•°æ®è®¿é—®å±‚
 * 
 * ç»§æ‰¿ BaseMapper è·å¾— MyBatis-Plus çš„åŸºç¡€ CRUD åŠŸèƒ½ã€‚
 * è‡ªå®šä¹‰æ–¹æ³•ä»…ç”¨äºå¤æ‚æŸ¥è¯¢ï¼Œé¿å…ç¼–å†™æ˜¾å¼ SQLã€‚
 */
@Mapper
interface UserMapper : BaseMapper<UserPO> {
    
    /**
     * æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·
     * 
     * ä½¿ç”¨ MyBatis-Plus çš„ QueryWrapper æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œ
     * é¿å…ç¼–å†™æ˜¾å¼ SQL è¯­å¥ã€‚
     * 
     * @param username ç”¨æˆ·å
     * @return ç”¨æˆ·å®ä½“ï¼Œæœªæ‰¾åˆ°æ—¶è¿”å› null
     */
    fun selectByUsername(username: String): UserPO? {
        val queryWrapper = QueryWrapper<UserPO>()
        queryWrapper.eq("username", username)
            .eq("status", STATUS_NORMAL) // åªæŸ¥è¯¢æ­£å¸¸çŠ¶æ€çš„ç”¨æˆ·
        return selectOne(queryWrapper)
    }
    
    /**
     * åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
     * 
     * ä½¿ç”¨ MyBatis-Plus åˆ†é¡µæ’ä»¶å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Œ
     * æ”¯æŒåŠ¨æ€æ¡ä»¶ç»„åˆã€‚
     * 
     * @param page åˆ†é¡µå‚æ•°
     * @param username ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢
     * @param status ç”¨æˆ·çŠ¶æ€ç²¾ç¡®æŸ¥è¯¢
     * @return åˆ†é¡µç»“æœ
     */
    fun selectUserPage(
        page: Page<UserPO>, 
        username: String?, 
        status: Int?
    ): Page<UserPO> {
        val queryWrapper = QueryWrapper<UserPO>()
        
        // åŠ¨æ€æ·»åŠ æŸ¥è¯¢æ¡ä»¶
        username?.let {
            queryWrapper.like("username", it)
        }
        status?.let {
            queryWrapper.eq("status", it)
        }
        
        queryWrapper.orderByDesc("create_time") // æŒ‰åˆ›å»ºæ—¶é—´å€’åº
        
        return selectPage(page, queryWrapper)
    }
    
    // å¤šè¡¨è”æŸ¥æ—¶æ‰ä½¿ç”¨ @Select æ³¨è§£
    /**
     * æŸ¥è¯¢ç”¨æˆ·åŠå…¶è§’è‰²ä¿¡æ¯ï¼ˆå¤šè¡¨è”æŸ¥ç¤ºä¾‹ï¼‰
     * 
     * ä»…åœ¨å¤šè¡¨è”æŸ¥æ—¶å…è®¸ä½¿ç”¨æ˜¾å¼ SQLï¼Œ
     * å•è¡¨æ“ä½œä¸¥ç¦ä½¿ç”¨ @Select æ³¨è§£ã€‚
     */
    @Select("""
        SELECT u.*, r.role_name 
        FROM data_user u 
        LEFT JOIN user_role ur ON u.id = ur.user_id 
        LEFT JOIN role r ON ur.role_id = r.id 
        WHERE u.id = #{userId} AND u.status = 0
    """)
    fun selectUserWithRoles(@Param("userId") userId: String): UserWithRolesVO?
}
```

#### 4.4 Service å±‚ MyBatis-Plus ä½¿ç”¨è§„èŒƒ

```kotlin
/**
 * ç”¨æˆ·æœåŠ¡å®ç°ç±»
 * 
 * æ¼”ç¤º MyBatis-Plus çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼ï¼Œ
 * ä¼˜å…ˆä½¿ç”¨å†…ç½®æ–¹æ³•ï¼Œé¿å…ç¼–å†™æ˜¾å¼ SQLã€‚
 */
@Service
class UserServiceImpl(
    private val userMapper: UserMapper
) : UserService {
    
    /**
     * åˆ›å»ºç”¨æˆ·
     * 
     * ä½¿ç”¨ MyBatis-Plus çš„ insert æ–¹æ³•ï¼Œ
     * è‡ªåŠ¨å¡«å……åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´ã€‚
     */
    override fun createUser(userDTO: UserDTO): UserDTO {
        val userPO = UserPO(
            username = userDTO.username,
            passwordHash = PasswordUtil.encrypt(userDTO.password),
            email = userDTO.email
        )
        
        // ä½¿ç”¨ MyBatis-Plus å†…ç½®æ–¹æ³•æ’å…¥æ•°æ®
        userMapper.insert(userPO)
        
        return userDTO.copy(id = userPO.id!!)
    }
    
    /**
     * æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·
     * 
     * ç›´æ¥ä½¿ç”¨ MyBatis-Plus çš„ selectById æ–¹æ³•ã€‚
     */
    override fun getUserById(id: String): UserDTO? {
        return userMapper.selectById(id)?.let { userPO ->
            UserDTO(
                id = userPO.id!!,
                username = userPO.username,
                email = userPO.email,
                status = userPO.status
            )
        }
    }
    
    /**
     * æ›´æ–°ç”¨æˆ·ä¿¡æ¯
     * 
     * ä½¿ç”¨ MyBatis-Plus çš„ updateById æ–¹æ³•ï¼Œ
     * è‡ªåŠ¨å¡«å……æ›´æ–°æ—¶é—´ã€‚
     */
    override fun updateUser(id: String, userDTO: UserDTO): Boolean {
        val updateWrapper = LambdaUpdateWrapper<UserPO>()
            .eq(UserPO::id, id)
            .set(UserPO::username, userDTO.username)
            .set(UserPO::email, userDTO.email)
        
        return userMapper.update(null, updateWrapper) > 0
    }
    
    /**
     * æ ¹æ®æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
     * 
     * ä½¿ç”¨ QueryWrapper æ„å»ºå¤æ‚æŸ¥è¯¢æ¡ä»¶ï¼Œ
     * é¿å…ç¼–å†™æ˜¾å¼ SQLã€‚
     */
    override fun findUsers(userQuery: UserQueryDTO): List<UserDTO> {
        val queryWrapper = QueryWrapper<UserPO>()
        
        // å¤šæ¡ä»¶åŠ¨æ€æŸ¥è¯¢
        userQuery.username?.let {
            queryWrapper.like("username", it)
        }
        userQuery.email?.let {
            queryWrapper.eq("email", it)
        }
        userQuery.status?.let {
            queryWrapper.eq("status", it)
        }
        
        // æ’åº
        userQuery.sortBy?.let { sortBy ->
            val sortOrder = if (userQuery.isAsc) "ASC" else "DESC"
            queryWrapper.orderBy(true, userQuery.isAsc, sortBy)
        } ?: queryWrapper.orderByDesc("create_time")
        
        return userMapper.selectList(queryWrapper).map { userPO ->
            UserDTO(
                id = userPO.id!!,
                username = userPO.username,
                email = userPO.email,
                status = userPO.status
            )
        }
    }
    
    /**
     * æ‰¹é‡æ›´æ–°ç”¨æˆ·çŠ¶æ€
     * 
     * ä½¿ç”¨ UpdateWrapper è¿›è¡Œæ‰¹é‡æ›´æ–°ï¼Œ
     * é¿å…å¾ªç¯è°ƒç”¨å•ä¸ªæ›´æ–°æ–¹æ³•ã€‚
     */
    override fun batchUpdateStatus(userIds: List<String>, status: Int): Boolean {
        if (userIds.isEmpty()) return true
        
        val updateWrapper = UpdateWrapper<UserPO>()
            .`in`("id", userIds)
            .set("status", status)
        
        return userMapper.update(null, updateWrapper) > 0
    }
    
    /**
     * ç»Ÿè®¡ç”¨æˆ·æ•°é‡
     * 
     * ä½¿ç”¨ QueryWrapper çš„ count æ–¹æ³•ï¼Œ
     * é¿å…ç¼–å†™ COUNT SQLã€‚
     */
    override fun countUsersByStatus(status: Int): Long {
        val queryWrapper = QueryWrapper<UserPO>()
            .eq("status", status)
        return userMapper.selectCount(queryWrapper)
    }
}
```

#### 4.5 MyBatis-Plus é…ç½®è§„èŒƒ

```kotlin
/**
 * MyBatis-Plus é…ç½®ç±»
 * 
 * é…ç½®åˆ†é¡µæ’ä»¶ã€é€»è¾‘åˆ é™¤ã€è‡ªåŠ¨å¡«å……ç­‰åŠŸèƒ½ã€‚
 */
@Configuration
@ConfigurationPropertiesScan("com.wuzhi.server.property")
class MybatisPlusConfig {
    
    /**
     * åˆ†é¡µæ’ä»¶é…ç½®
     */
    @Bean
    fun mybatisPlusInterceptor(): MybatisPlusInterceptor {
        return MybatisPlusInterceptor().apply {
            // æ·»åŠ åˆ†é¡µæ’ä»¶
            addInnerInterceptor(PaginationInnerInterceptor(DbType.MYSQL))
            // æ·»åŠ ä¹è§‚é”æ’ä»¶
            addInnerInterceptor(OptimisticLockerInnerInterceptor())
            // æ·»åŠ æ•°æ®æƒé™æ’ä»¶
            addInnerInterceptor(DataPermissionInterceptor())
        }
    }
    
    /**
     * è‡ªåŠ¨å¡«å……é…ç½®
     */
    @Bean
    fun metaObjectHandler(): MetaObjectHandler {
        return object : MetaObjectHandler {
            override fun insertFill(metaObject: MetaObject) {
                // æ’å…¥æ—¶è‡ªåŠ¨å¡«å……åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´
                this.strictInsertFill(metaObject, "createTime", LocalDateTime::class.java, LocalDateTime.now())
                this.strictInsertFill(metaObject, "updateTime", LocalDateTime::class.java, LocalDateTime.now())
            }
            
            override fun updateFill(metaObject: MetaObject) {
                // æ›´æ–°æ—¶è‡ªåŠ¨å¡«å……æ›´æ–°æ—¶é—´
                this.strictUpdateFill(metaObject, "updateTime", LocalDateTime::class.java, LocalDateTime.now())
            }
        }
    }
}
```

### 5. ä»£ç è¡Œå†…æ³¨é‡Šè§„èŒƒ

```kotlin
@Service
class ChatServiceImpl {
    
    fun processMessage(message: String): String {
        // éªŒè¯è¾“å…¥æ¶ˆæ¯çš„åˆæ³•æ€§
        if (message.isBlank()) {
            return ErrorMessages.EMPTY_MESSAGE
        }
        
        // æ£€æŸ¥æ¶ˆæ¯é•¿åº¦é™åˆ¶ï¼ˆæœ€å¤§2000å­—ç¬¦ï¼‰
        if (message.length > MAX_MESSAGE_LENGTH) {
            return ErrorMessages.MESSAGE_TOO_LONG
        }
        
        // è°ƒç”¨AIæœåŠ¡å¤„ç†æ¶ˆæ¯ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´ä¸º30ç§’
        val response = aiService.process(message, Duration.ofSeconds(30))
        
        // ä½¿ç”¨ MyBatis-Plus ä¿å­˜èŠå¤©è®°å½•
        val chatRecord = ChatPO(
            userId = UserContext.getCurrentUserId(),
            userContent = message,
            aiContent = response,
            type = ChatType.SUMMARY
        )
        chatMapper.insert(chatRecord) // ä½¿ç”¨å†…ç½® insert æ–¹æ³•
        
        return response
    }
}
```

## å‰ç«¯ Vue.js + TypeScript ä»£ç è§„èŒƒ

### 1. API è°ƒç”¨é”™è¯¯å¤„ç†è§„èŒƒ

#### 1.1 ç»Ÿä¸€é”™è¯¯å¤„ç†åŸåˆ™
- **ç¦æ­¢æ˜¾å¼ try-catch**ï¼šæ‰€æœ‰æ¥å£è°ƒç”¨é”™è¯¯å·²åœ¨ `AxiosUtil.ts` ä¸­ç»Ÿä¸€å¤„ç†ï¼Œå‰ç«¯ä»£ç ä¸å¾—æ˜¾å¼ä½¿ç”¨ try-catch æ•è· API é”™è¯¯
- **é›†ä¸­å¤„ç†**ï¼šæ‰€æœ‰ HTTP è¯·æ±‚çš„é”™è¯¯å¤„ç†é€»è¾‘é›†ä¸­åœ¨ `AxiosUtil.ts` çš„æ‹¦æˆªå™¨å’Œå“åº”å¤„ç†ä¸­
- **ä¿æŒç®€æ´**ï¼šä¸šåŠ¡ä»£ç åªå…³æ³¨æˆåŠŸé€»è¾‘ï¼Œä¸å…³å¿ƒé”™è¯¯å¤„ç†ç»†èŠ‚

#### 1.2 æ­£ç¡®çš„ API è°ƒç”¨æ–¹å¼

```typescript
// âœ… æ­£ç¡®ï¼šç›´æ¥è°ƒç”¨ APIï¼Œä¸å¤„ç†å¼‚å¸¸
const getUserList = async () => {
  // ç›´æ¥è°ƒç”¨ï¼Œä¸ä½¿ç”¨ try-catch
  const users = await UserApi.getUserList()
  userList.value = users
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨ then å¤„ç†æˆåŠŸç»“æœ
const login = () => {
  AuthApi.login(loginForm).then(data => {
    // å¤„ç†ç™»å½•æˆåŠŸé€»è¾‘
    authStore.saveLoginData(data.token, data.refreshToken)
    router.push('/dashboard')
  })
  // ä¸éœ€è¦ catchï¼Œé”™è¯¯å·²åœ¨ AxiosUtil ä¸­å¤„ç†
}
```

#### 1.3 é”™è¯¯å¤„ç†è¯´æ˜

`AxiosUtil.ts` å·²æä¾›ä»¥ä¸‹é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

1. **401 æƒé™é”™è¯¯**ï¼šè‡ªåŠ¨å°è¯•åˆ·æ–° tokenï¼Œåˆ·æ–°å¤±è´¥åˆ™æç¤º"è¯·ç™»å½•"å¹¶è·³è½¬åˆ°ç™»å½•é¡µ
2. **ä¸šåŠ¡é”™è¯¯**ï¼šé 200 çŠ¶æ€ç çš„å“åº”è‡ªåŠ¨æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
3. **ç½‘ç»œé”™è¯¯**ï¼šæ˜¾ç¤ºç½‘ç»œç›¸å…³é”™è¯¯æç¤º
4. **æˆåŠŸæç¤º**ï¼šé "NO_TIP" çš„æˆåŠŸæ¶ˆæ¯è‡ªåŠ¨æ˜¾ç¤ºæˆåŠŸæç¤º

#### 1.4 ç‰¹æ®Šæƒ…å†µå¤„ç†

```typescript
// âœ… æ­£ç¡®ï¼šéœ€è¦é™é»˜å¤„ç†çš„æƒ…å†µ
const silentApiCall = async () => {
  // åœ¨ API ä¸­ä½¿ç”¨ç‰¹æ®Šæ¶ˆæ¯æ ‡è¯† "NO_TIP" é¿å…è‡ªåŠ¨æç¤º
  const result = await SomeApi.silentCall()
  // é™é»˜å¤„ç†ç»“æœ
}

// âœ… æ­£ç¡®ï¼šéœ€è¦è‡ªå®šä¹‰æˆåŠŸæç¤ºçš„æƒ…å†µ
const customSuccessTip = async () => {
  const result = await SomeApi.customCall()
  // æ ¹æ®ç»“æœè‡ªå®šä¹‰æç¤º
  if (result.status === 'special') {
    ElMessage.success('ç‰¹æ®Šæ“ä½œå®Œæˆ')
  }
  // ä¸ä¼šé‡å¤æ˜¾ç¤ºé»˜è®¤æˆåŠŸæç¤ºï¼Œå› ä¸ºå¯ä»¥åœ¨ API ä¸­è¿”å› "NO_TIP"
}
```

### 2. æ–‡ä»¶å’Œç»„ä»¶æ³¨é‡Šè§„èŒƒ

#### 1.1 Vue å•æ–‡ä»¶ç»„ä»¶æ³¨é‡Š
```vue
<!--
  ç»„ä»¶åç§°ï¼šChatMessage
  åŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºèŠå¤©æ¶ˆæ¯ç»„ä»¶ï¼Œæ”¯æŒç”¨æˆ·æ¶ˆæ¯å’ŒAIæ¶ˆæ¯çš„ä¸åŒæ ·å¼
  ä½œè€…ï¼š[ä½œè€…å]
  åˆ›å»ºæ—¶é—´ï¼š2025-01-10
  ä¾èµ–ï¼šElement Plus UIåº“
-->
<template>
  <!-- æ¶ˆæ¯å®¹å™¨ï¼Œæ ¹æ®å‘é€è€…ç±»å‹åº”ç”¨ä¸åŒæ ·å¼ -->
  <div 
    :class="['message-container', { 'user-message': isUser, 'ai-message': !isUser }]"
  >
    <!-- ç”¨æˆ·å¤´åƒæˆ–AIå›¾æ ‡ -->
    <div class="avatar">
      <img v-if="isUser" :src="userAvatar" alt="ç”¨æˆ·å¤´åƒ" />
      <el-icon v-else><Robot /></el-icon>
    </div>
    
    <!-- æ¶ˆæ¯å†…å®¹åŒºåŸŸ -->
    <div class="message-content">
      <!-- å‘é€æ—¶é—´æˆ³ -->
      <div class="timestamp">{{ formatTime(timestamp) }}</div>
      
      <!-- æ¶ˆæ¯æ–‡æœ¬ï¼Œæ”¯æŒMarkdownæ¸²æŸ“ -->
      <div class="message-text" v-html="renderedContent"></div>
    </div>
  </div>
</template>
```

#### 1.2 TypeScript ç±»å‹å®šä¹‰æ³¨é‡Š
```typescript
/**
 * ç”¨æˆ·ç™»å½•è¯·æ±‚DTO
 * 
 * åŒ…å«ç”¨æˆ·ç™»å½•æ‰€éœ€çš„æ‰€æœ‰å­—æ®µï¼Œæ”¯æŒç”¨æˆ·åç™»å½•å’Œé‚®ç®±ç™»å½•ã€‚
 * å¯†ç å­—æ®µå°†è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€‚
 */
export interface LoginDTO {
  /** 
   * ç™»å½•æ ‡è¯†ç¬¦
   * å¯ä»¥æ˜¯ç”¨æˆ·åæˆ–é‚®ç®±åœ°å€
   */
  identifier: string
  
  /** 
   * ç™»å½•å¯†ç 
   * å‰ç«¯éœ€è¦åŠ å¯†å¤„ç†åå†å‘é€
   */
  password: string
  
  /** 
   * è®°ä½ç™»å½•çŠ¶æ€
   * trueæ—¶å»¶é•¿tokenæœ‰æ•ˆæœŸè‡³30å¤©
   */
  rememberMe?: boolean
}

/**
 * èŠå¤©æ¶ˆæ¯å®ä½“
 * 
 * è¡¨ç¤ºå•æ¡èŠå¤©æ¶ˆæ¯çš„å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…å«å‘é€è€…ã€å†…å®¹ã€æ—¶é—´æˆ³ç­‰ã€‚
 * ç”¨äºå‰åç«¯æ•°æ®ä¼ è¾“å’Œæœ¬åœ°å­˜å‚¨ã€‚
 */
export interface ChatMessage {
  /** æ¶ˆæ¯å”¯ä¸€æ ‡è¯†ç¬¦ */
  id: string
  
  /** æ¶ˆæ¯å‘é€è€…ç±»å‹ */
  sender: 'user' | 'assistant'
  
  /** æ¶ˆæ¯å†…å®¹ï¼Œæ”¯æŒMarkdownæ ¼å¼ */
  content: string
  
  /** æ¶ˆæ¯å‘é€æ—¶é—´ï¼ˆUnixæ—¶é—´æˆ³ï¼‰ */
  timestamp: number
  
  /** æ¶ˆæ¯çŠ¶æ€ï¼šå‘é€ä¸­ã€å·²å‘é€ã€å‘é€å¤±è´¥ */
  status: 'sending' | 'sent' | 'failed'
  
  /** é™„åŠ å…ƒæ•°æ®ï¼Œå¦‚æ–‡ä»¶ä¿¡æ¯ã€å›¾ç‰‡URLç­‰ */
  metadata?: MessageMetadata
}
```

### 2. Vue Composition API æ³¨é‡Šè§„èŒƒ

#### 2.1 Setup å‡½æ•°æ³¨é‡Š
```typescript
<script setup lang="ts">
import { ref, computed, onMounted, watch } from 'vue'
import { useRouter } from 'vue-router'
import { useAuthStore } from '@/Stores/AuthStore'
import { LoginDTO } from '@/Entity/DTO/Auth/LoginDTO'
import { AxiosUtil } from '@/Util/AxiosUtil'

// =========================> ç»„ä»¶å±æ€§å®šä¹‰ <=========================
interface Props {
  /** æ˜¯å¦æ˜¾ç¤ºè®°ä½å¯†ç é€‰é¡¹ */
  showRememberMe?: boolean
  /** ç™»å½•æˆåŠŸåçš„é‡å®šå‘è·¯å¾„ */
  redirectPath?: string
}

const props = withDefaults(defineProps<Props>(), {
  showRememberMe: true,
  redirectPath: '/dashboard'
})

// =========================> å“åº”å¼æ•°æ® <=========================
/** ç™»å½•è¡¨å•æ•°æ® */
const loginForm = ref<LoginDTO>({
  identifier: '',
  password: '',
  rememberMe: false
})

/** è¡¨å•åŠ è½½çŠ¶æ€ */
const isLoading = ref(false)

/** è¡¨å•éªŒè¯é”™è¯¯ä¿¡æ¯ */
const formErrors = ref<Record<string, string>>({})

// =========================> è®¡ç®—å±æ€§ <=========================
/** è¡¨å•æ˜¯å¦æœ‰æ•ˆï¼ˆæ‰€æœ‰å¿…å¡«å­—æ®µéƒ½æœ‰å€¼ï¼‰ */
const isFormValid = computed(() => {
  return loginForm.value.identifier.trim() !== '' && 
         loginForm.value.password.trim() !== ''
})

/** ç™»å½•æŒ‰é’®æ˜¯å¦ç¦ç”¨ */
const isLoginDisabled = computed(() => {
  return !isFormValid.value || isLoading.value
})

// =========================> æ–¹æ³•å®šä¹‰ <=========================
/**
 * å¤„ç†ç”¨æˆ·ç™»å½•
 * 
 * éªŒè¯è¡¨å•æ•°æ®ï¼Œè°ƒç”¨ç™»å½•APIï¼Œå¤„ç†ç™»å½•ç»“æœã€‚
 * æˆåŠŸæ—¶ä¿å­˜ç”¨æˆ·ä¿¡æ¯å’Œtokenï¼Œå¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚
 */
const handleLogin = async (): Promise<void> => {
  if (!isFormValid.value) {
    ElMessage.warning('è¯·å¡«å†™å®Œæ•´çš„ç™»å½•ä¿¡æ¯')
    return
  }
  
  isLoading.value = true
  try {
    // è°ƒç”¨ç™»å½•API
    const response = await authApi.login(loginForm.value)
    
    if (response.success) {
      // ä¿å­˜ç”¨æˆ·ä¿¡æ¯å’Œtokenåˆ°store
      authStore.setUser(response.data.user)
      authStore.setToken(response.data.token)
      
      // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
      ElMessage.success('ç™»å½•æˆåŠŸ')
      
      // è·³è½¬åˆ°ç›®æ ‡é¡µé¢
      await router.push(props.redirectPath)
    } else {
      ElMessage.error(response.message || 'ç™»å½•å¤±è´¥')
    }
  } catch (error) {
    console.error('ç™»å½•é”™è¯¯:', error)
    ElMessage.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•')
  } finally {
    isLoading.value = false
  }
}

/**
 * éªŒè¯å•ä¸ªå­—æ®µ
 * 
 * @param field å­—æ®µå
 * @param value å­—æ®µå€¼
 * @returns éªŒè¯é”™è¯¯ä¿¡æ¯ï¼Œç©ºå­—ç¬¦ä¸²è¡¨ç¤ºéªŒè¯é€šè¿‡
 */
const validateField = (field: string, value: string): string => {
  if (!value || value.trim() === '') {
    return `${getFieldLabel(field)}ä¸èƒ½ä¸ºç©º`
  }
  
  switch (field) {
    case 'identifier':
      if (value.length < 3) return 'ç”¨æˆ·åæˆ–é‚®ç®±è‡³å°‘3ä¸ªå­—ç¬¦'
      break
    case 'password':
      if (value.length < 6) return 'å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦'
      break
  }
  
  return ''
}

// =========================> ç”Ÿå‘½å‘¨æœŸé’©å­ <=========================
onMounted(() => {
  // ç»„ä»¶æŒ‚è½½æ—¶åˆå§‹åŒ–è¡¨å•
  initializeForm()
})

// =========================> ç›‘å¬å™¨ <=========================
watch(
  () => loginForm.value.identifier,
  (newValue) => {
    // ç”¨æˆ·åæ”¹å˜æ—¶æ¸…é™¤ç›¸å…³é”™è¯¯ä¿¡æ¯
    if (formErrors.value.identifier) {
      formErrors.value.identifier = ''
    }
  }
)
</script>
```

### 3. API æ¥å£æ³¨é‡Šè§„èŒƒ

```typescript
import { AxiosResponse } from 'axios'
import { LoginDTO, LoginResult } from '@/Entity/DTO/Auth'
import { AxiosUtil } from '@/Util/AxiosUtil'

/**
 * è®¤è¯ç›¸å…³APIæ¥å£
 * 
 * æä¾›ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€tokenåˆ·æ–°ç­‰è®¤è¯ç›¸å…³åŠŸèƒ½ã€‚
 * æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè‡ªåŠ¨æ·»åŠ è®¤è¯å¤´éƒ¨ä¿¡æ¯ã€‚
 */
export class AuthApi {
  /**
   * ç”¨æˆ·å¯†ç ç™»å½•
   * 
   * ä½¿ç”¨ç”¨æˆ·å/é‚®ç®±å’Œå¯†ç è¿›è¡Œèº«ä»½éªŒè¯ï¼ŒéªŒè¯æˆåŠŸå
   * è¿”å›JWTè®¿é—®ä»¤ç‰Œå’Œç”¨æˆ·ä¿¡æ¯ã€‚
   * 
   * @param loginData ç™»å½•è¯·æ±‚æ•°æ®
   * @returns ç™»å½•ç»“æœï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯å’Œä»¤ç‰Œ
   * @throws 401 å½“è®¤è¯å¤±è´¥æ—¶
   * @throws 429 å½“è¯·æ±‚è¿‡äºé¢‘ç¹æ—¶
   */
  static async login(loginData: LoginDTO): Promise<AxiosResponse<LoginResult>> {
    return await AxiosUtil.post('/auth/login', loginData)
  }
  
  /**
   * åˆ·æ–°è®¿é—®ä»¤ç‰Œ
   * 
   * ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè·å–æ–°çš„è®¿é—®ä»¤ç‰Œï¼Œç”¨äºå»¶é•¿ç”¨æˆ·ä¼šè¯ã€‚
   * åˆ·æ–°ä»¤ç‰Œè¿‡æœŸåéœ€è¦é‡æ–°ç™»å½•ã€‚
   * 
   * @param refreshToken åˆ·æ–°ä»¤ç‰Œ
   * @returns æ–°çš„è®¿é—®ä»¤ç‰Œä¿¡æ¯
   */
  static async refreshToken(refreshToken: string): Promise<AxiosResponse<TokenResult>> {
    return await AxiosUtil.post('/auth/refresh', { refreshToken })
  }
  
  /**
   * ç”¨æˆ·é€€å‡ºç™»å½•
   * 
   * ä½¿ç”¨æˆ·å½“å‰ä¼šè¯å¤±æ•ˆï¼Œæ¸…é™¤æœåŠ¡ç«¯çš„tokençŠ¶æ€ã€‚
   * å®¢æˆ·ç«¯ä¹Ÿéœ€è¦æ¸…é™¤æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯ã€‚
   * 
   * @param accessToken å½“å‰è®¿é—®ä»¤ç‰Œ
   */
  static async logout(accessToken: string): Promise<AxiosResponse<void>> {
    return await AxiosUtil.post('/auth/logout', { accessToken })
  }
}
```

### 4. å·¥å…·ç±»æ³¨é‡Šè§„èŒƒ

```typescript
/**
 * æ—¶é—´æ ¼å¼åŒ–å·¥å…·ç±»
 * 
 * æä¾›å„ç§æ—¶é—´æ ¼å¼åŒ–ã€è®¡ç®—ã€è½¬æ¢çš„å·¥å…·æ–¹æ³•ã€‚
 * æ”¯æŒå¤šè¯­è¨€ã€æ—¶åŒºå¤„ç†ç­‰åŠŸèƒ½ã€‚
 */
export class TimeFormatUtil {
  /** é»˜è®¤æ—¥æœŸæ—¶é—´æ ¼å¼ */
  private static readonly DEFAULT_DATETIME_FORMAT = 'YYYY-MM-DD HH:mm:ss'
  
  /** é»˜è®¤æ—¥æœŸæ ¼å¼ */
  private static readonly DEFAULT_DATE_FORMAT = 'YYYY-MM-DD'
  
  /**
   * æ ¼å¼åŒ–æ—¶é—´æˆ³ä¸ºå¯è¯»å­—ç¬¦ä¸²
   * 
   * å°†Unixæ—¶é—´æˆ³è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼çš„æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²ã€‚
   * æ”¯æŒç›¸å¯¹æ—¶é—´æ˜¾ç¤ºï¼ˆå¦‚"3åˆ†é’Ÿå‰"ï¼‰ã€‚
   * 
   * @param timestamp Unixæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
   * @param format æ ¼å¼åŒ–æ¨¡æ¿ï¼Œé»˜è®¤ä¸º 'YYYY-MM-DD HH:mm:ss'
   * @param relative æ˜¯å¦ä½¿ç”¨ç›¸å¯¹æ—¶é—´ï¼Œé»˜è®¤ä¸º false
   * @returns æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸²
   * 
   * @example
   * ```typescript
   * TimeFormatUtil.format(1640995200000) // '2022-01-01 00:00:00'
   * TimeFormatUtil.format(Date.now() - 180000, '', true) // '3åˆ†é’Ÿå‰'
   * ```
   */
  static format(
    timestamp: number, 
    format: string = this.DEFAULT_DATETIME_FORMAT,
    relative: boolean = false
  ): string {
    if (relative) {
      return this.formatRelative(timestamp)
    }
    
    return dayjs(timestamp).format(format)
  }
  
  /**
   * è®¡ç®—ç›¸å¯¹æ—¶é—´æ˜¾ç¤º
   * 
   * è®¡ç®—ç»™å®šæ—¶é—´æˆ³ç›¸å¯¹äºå½“å‰æ—¶é—´çš„æ—¶é—´å·®ï¼Œ
   * è¿”å›äººç±»å¯è¯»çš„ç›¸å¯¹æ—¶é—´å­—ç¬¦ä¸²ã€‚
   * 
   * @param timestamp ç›®æ ‡æ—¶é—´æˆ³
   * @returns ç›¸å¯¹æ—¶é—´å­—ç¬¦ä¸²
   */
  private static formatRelative(timestamp: number): string {
    const now = Date.now()
    const diff = now - timestamp
    
    // å¤„ç†æœªæ¥æ—¶é—´
    if (diff < 0) {
      const futureDiff = Math.abs(diff)
      if (futureDiff < 60000) return 'å³å°†'
      return dayjs(timestamp).fromNow()
    }
    
    // è¿‡å»æ—¶é—´
    const minutes = Math.floor(diff / 60000)
    const hours = Math.floor(diff / 3600000)
    const days = Math.floor(diff / 86400000)
    
    if (minutes < 1) return 'åˆšåˆš'
    if (minutes < 60) return `${minutes}åˆ†é’Ÿå‰`
    if (hours < 24) return `${hours}å°æ—¶å‰`
    if (days < 30) return `${days}å¤©å‰`
    
    return dayjs(timestamp).format(this.DEFAULT_DATE_FORMAT)
  }
}
```

## é€šç”¨æ³¨é‡Šè§„èŒƒ

### 1. TODO æ³¨é‡Šè§„èŒƒ
```kotlin
// TODO: 2025-01-10 - [ä½œè€…å] - æ·»åŠ é‚®ä»¶éªŒè¯åŠŸèƒ½
// éœ€è¦é›†æˆé‚®ä»¶æœåŠ¡ï¼Œå®ç°éªŒè¯ç å‘é€å’ŒéªŒè¯é€»è¾‘

// TODO: ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
// å½“å‰æŸ¥è¯¢å­˜åœ¨N+1é—®é¢˜ï¼Œéœ€è¦æ·»åŠ joinæŸ¥è¯¢æˆ–ç¼“å­˜æœºåˆ¶
```

### 2. FIXME æ³¨é‡Šè§„èŒƒ
```typescript
// FIXME: å¤„ç†å¹¶å‘ä¿®æ”¹é—®é¢˜
// å½“å‰å®ç°å¯èƒ½å­˜åœ¨ç«æ€æ¡ä»¶ï¼Œéœ€è¦æ·»åŠ ä¹è§‚é”æˆ–åˆ†å¸ƒå¼é”

// FIXME: ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜
// äº‹ä»¶ç›‘å¬å™¨æœªæ­£ç¡®æ¸…ç†ï¼Œå¯¼è‡´å†…å­˜å ç”¨æŒç»­å¢é•¿
```

### 3. NOTE æ³¨é‡Šè§„èŒƒ
```typescript
// NOTE: è¿™é‡Œä½¿ç”¨ç¬¬ä¸‰æ–¹APIï¼Œæœ‰è°ƒç”¨é¢‘ç‡é™åˆ¶
// éœ€è¦å®ç°è¯·æ±‚é™æµå’Œé‡è¯•æœºåˆ¶

// NOTE: æ•°æ®åº“è¡¨ç»“æ„å˜æ›´éœ€è¦è€ƒè™‘æ•°æ®è¿ç§»
// å­—æ®µç±»å‹å˜æ›´æ—¶éœ€è¦æä¾›å‘åå…¼å®¹æ€§
```

### 4. WARNING æ³¨é‡Šè§„èŒƒ
```kotlin
// WARNING: æ­¤æ–¹æ³•ä¼šåˆ é™¤æ•°æ®ï¼Œè¯·è°¨æ…è°ƒç”¨
// å»ºè®®åœ¨è°ƒç”¨å‰è¿›è¡ŒäºŒæ¬¡ç¡®è®¤

// WARNING: è¿™æ˜¯ä¸€ä¸ªæ€§èƒ½æ•æ„Ÿçš„æ–¹æ³•
// åœ¨é«˜é¢‘è°ƒç”¨åœºæ™¯ä¸‹éœ€è¦ç‰¹åˆ«å…³æ³¨æ‰§è¡Œæ•ˆç‡
```

## æ³¨é‡Šæ£€æŸ¥æ¸…å•

### åç«¯ä»£ç 
- [ ] æ¯ä¸ªå…¬å…±ç±»éƒ½æœ‰å®Œæ•´çš„ç±»æ³¨é‡Š
- [ ] æ¯ä¸ªå…¬å…±æ–¹æ³•éƒ½æœ‰JSDocæ³¨é‡Š
- [ ] å¸¸é‡å’Œé‡è¦å­—æ®µéƒ½æœ‰æ³¨é‡Šè¯´æ˜
- [ ] å¤æ‚ä¸šåŠ¡é€»è¾‘éƒ½æœ‰è¡Œå†…æ³¨é‡Š
- [ ] å¼‚å¸¸å¤„ç†éƒ½æœ‰æ³¨é‡Šè¯´æ˜åŸå› 
- [ ] APIæ¥å£éƒ½æœ‰å®Œæ•´çš„å‚æ•°å’Œè¿”å›å€¼è¯´æ˜
- [ ] **å¼ºåˆ¶ä½¿ç”¨ MyBatis-Plus å†…ç½®æ–¹æ³•è¿›è¡Œå•è¡¨æ“ä½œ**
- [ ] **ä¸¥ç¦åœ¨å•è¡¨æ“ä½œä¸­ä½¿ç”¨æ˜¾å¼ SQL è¯­å¥**
- [ ] **å®ä½“ç±»æ­£ç¡®ä½¿ç”¨äº† @TableNameã€@TableIdã€@TableField æ³¨è§£**
- [ ] **Mapper æ¥å£ç»§æ‰¿äº† BaseMapper å¹¶æ­£ç¡®ä½¿ç”¨ QueryWrapper**
- [ ] **å¤šè¡¨è”æŸ¥æ—¶æ‰ä½¿ç”¨ @Select æ³¨è§£å¹¶æ·»åŠ è¯¦ç»†æ³¨é‡Šè¯´æ˜**

### å‰ç«¯ä»£ç 
- [ ] æ¯ä¸ªVueç»„ä»¶éƒ½æœ‰åŠŸèƒ½æè¿°æ³¨é‡Š
- [ ] TypeScriptæ¥å£å’Œç±»å‹éƒ½æœ‰è¯¦ç»†è¯´æ˜
- [ ] å¤æ‚çš„å“åº”å¼é€»è¾‘éƒ½æœ‰æ³¨é‡Š
- [ ] äº‹ä»¶å¤„ç†å‡½æ•°éƒ½æœ‰åŠŸèƒ½è¯´æ˜
- [ ] ç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨éƒ½æœ‰è¯´æ˜æ³¨é‡Š
- [ ] **ç¦æ­¢ä½¿ç”¨æ˜¾å¼ try-catch å¤„ç† API é”™è¯¯**
- [ ] **æ‰€æœ‰æ¥å£è°ƒç”¨ç›´æ¥ä½¿ç”¨ï¼Œé”™è¯¯å·²åœ¨ AxiosUtil ä¸­ç»Ÿä¸€å¤„ç†**
- [ ] **éœ€è¦ç‰¹æ®Šé”™è¯¯å¤„ç†çš„åœºæ™¯ä½¿ç”¨ API å±‚æä¾›çš„ç‰¹æ®Šæ ‡è¯†ï¼ˆå¦‚ "NO_TIP"ï¼‰**

### é€šç”¨è§„èŒƒ
- [ ] æ³¨é‡Šä¸ä»£ç ä¿æŒåŒæ­¥æ›´æ–°
- [ ] æ³¨é‡Šè¯­è¨€ç»Ÿä¸€ä½¿ç”¨ä¸­æ–‡
- [ ] é¿å…æ³¨é‡Šæ˜¾è€Œæ˜“è§çš„ä»£ç 
- [ ] é‡è¦ä¸šåŠ¡å†³ç­–éƒ½æœ‰æ³¨é‡Šè®°å½•
- [ ] æ€§èƒ½æ•æ„Ÿä»£ç éƒ½æœ‰ç‰¹åˆ«è¯´æ˜

## å·¥å…·å’Œè‡ªåŠ¨åŒ–

### 1. IDE é…ç½®
- é…ç½®IDEè‡ªåŠ¨ç”Ÿæˆæ³¨é‡Šæ¨¡æ¿
- å¯ç”¨æ³¨é‡Šæ‹¼å†™æ£€æŸ¥
- é…ç½®ä»£ç æ ¼å¼åŒ–è§„åˆ™

### 2. ä»£ç å®¡æŸ¥æ£€æŸ¥ç‚¹
- æ–°å¢ä»£ç æ˜¯å¦åŒ…å«å¿…è¦æ³¨é‡Š
- æ³¨é‡Šæ˜¯å¦å‡†ç¡®æè¿°äº†ä»£ç åŠŸèƒ½
- æ˜¯å¦å­˜åœ¨è¿‡æ—¶æˆ–é”™è¯¯çš„æ³¨é‡Š
- å¤æ‚é€»è¾‘æ˜¯å¦æœ‰å……åˆ†è¯´æ˜

### 3. æ–‡æ¡£ç”Ÿæˆ
- ä½¿ç”¨JSDoc/KDocç”ŸæˆAPIæ–‡æ¡£
- ç¡®ä¿æ³¨é‡Šæ ¼å¼ç¬¦åˆæ–‡æ¡£ç”Ÿæˆè¦æ±‚
- å®šæœŸæ›´æ–°å’Œç»´æŠ¤ç”Ÿæˆçš„æ–‡æ¡£

## MyBatis-Plus ä½¿ç”¨ç¦ä»¤å’Œä¾‹å¤–

### ğŸš« ä¸¥æ ¼ç¦æ­¢çš„æ“ä½œ

1. **å•è¡¨æ“ä½œä¸­ä½¿ç”¨æ˜¾å¼ SQL**
   ```kotlin
   // âŒ é”™è¯¯ï¼šä¸¥ç¦åœ¨å•è¡¨æ“ä½œä¸­ä½¿ç”¨ @Select
   @Select("SELECT * FROM data_user WHERE username = #{username}")
   fun selectByUsername(username: String): UserPO?
   
   // âŒ é”™è¯¯ï¼šä¸¥ç¦åœ¨ Service ä¸­ç¼–å†™ SQL å­—ç¬¦ä¸²
   fun getUserByUsername(username: String): UserPO? {
       val sql = "SELECT * FROM data_user WHERE username = '$username'"
       return jdbcTemplate.queryForObject(sql, UserPO::class.java)
   }
   ```

2. **é‡å¤å®ç° MyBatis-Plus å·²æœ‰åŠŸèƒ½**
   ```kotlin
   // âŒ é”™è¯¯ï¼šé‡å¤å®ç° insert åŠŸèƒ½
   fun customInsert(user: UserPO): Int {
       val sql = "INSERT INTO data_user (username, password_hash) VALUES (?, ?)"
       return jdbcTemplate.update(sql, user.username, user.passwordHash)
   }
   
   // âœ… æ­£ç¡®ï¼šä½¿ç”¨ MyBatis-Plus å†…ç½®æ–¹æ³•
   fun insertUser(user: UserPO): Int {
       return userMapper.insert(user)
   }
   ```

### âœ… å…è®¸çš„ä¾‹å¤–æƒ…å†µ

1. **å¤šè¡¨è”æŸ¥**
   ```kotlin
   // âœ… æ­£ç¡®ï¼šå¤šè¡¨è”æŸ¥æ—¶å¯ä»¥ä½¿ç”¨ @Select
   @Select("""
       SELECT u.*, r.role_name 
       FROM data_user u 
       LEFT JOIN user_role ur ON u.id = ur.user_id 
       LEFT JOIN role r ON ur.role_id = r.id 
       WHERE u.id = #{userId}
   """)
   fun selectUserWithRoles(@Param("userId") userId: String): UserWithRolesVO?
   ```

2. **å¤æ‚èšåˆæŸ¥è¯¢**
   ```kotlin
   // âœ… æ­£ç¡®ï¼šå¤æ‚çš„ç»Ÿè®¡æŸ¥è¯¢å¯ä»¥ä½¿ç”¨ @Select
   @Select("""
       SELECT 
           DATE(create_time) as date,
           COUNT(*) as user_count,
           COUNT(CASE WHEN status = 0 THEN 1 END) as active_count
       FROM data_user 
       WHERE create_time >= #{startDate} 
       GROUP BY DATE(create_time)
   """)
   fun selectUserStats(@Param("startDate") startDate: LocalDateTime): List<UserStatsVO>
   ```

3. **æ•°æ®åº“ç‰¹å®šåŠŸèƒ½**
   ```kotlin
   // âœ… æ­£ç¡®ï¼šä½¿ç”¨æ•°æ®åº“ç‰¹å®šåŠŸèƒ½ï¼ˆå¦‚å…¨æ–‡æœç´¢ï¼‰
   @Select("""
       SELECT * FROM data_user 
       WHERE MATCH(username, email) AGAINST(#{keyword} IN NATURAL LANGUAGE MODE)
   """)
   fun searchUsers(@Param("keyword") keyword: String): List<UserPO>
   ```

## æœ€ä½³å®è·µç¤ºä¾‹

### 1. æ­£ç¡®çš„æŸ¥è¯¢æ–¹å¼

```kotlin
// âœ… ä½¿ç”¨ QueryWrapper æ„å»ºæ¡ä»¶æŸ¥è¯¢
fun findActiveUsers(username: String?): List<UserPO> {
    val queryWrapper = QueryWrapper<UserPO>()
        .eq("status", UserPO.STATUS_NORMAL) // çŠ¶æ€è¿‡æ»¤
    
    username?.let {
        queryWrapper.like("username", it) // åŠ¨æ€æ·»åŠ æ¨¡ç³ŠæŸ¥è¯¢
    }
    
    queryWrapper.orderByDesc("create_time") // æ’åº
    
    return userMapper.selectList(queryWrapper)
}

// âœ… ä½¿ç”¨ LambdaUpdateWrapper è¿›è¡Œæ›´æ–°
fun updateUserStatus(userIds: List<String>, status: Int): Boolean {
    val updateWrapper = LambdaUpdateWrapper<UserPO>()
        .`in`(UserPO::id, userIds)
        .set(UserPO::status, status)
        .set(UserPO::updateTime, LocalDateTime.now())
    
    return userMapper.update(null, updateWrapper) > 0
}
```

### 2. åˆ†é¡µæŸ¥è¯¢å®ç°

```kotlin
// âœ… ä½¿ç”¨ MyBatis-Plus åˆ†é¡µæ’ä»¶
fun getUserPage(pageNum: Int, pageSize: Int, keyword: String?): Page<UserVO> {
    val page = Page<UserPO>(pageNum, pageSize)
    val queryWrapper = QueryWrapper<UserPO>()
    
    keyword?.let {
        queryWrapper.and(wrapper -> 
            wrapper.like("username", it)
                .or()
                .like("email", it)
        )
    }
    
    queryWrapper.orderByDesc("create_time")
    
    val userPage = userMapper.selectPage(page, queryWrapper)
    
    // è½¬æ¢ä¸º VO è¿”å›
    return userPage.convert { userPO ->
        UserVO(
            id = userPO.id!!,
            username = userPO.username,
            email = userPO.email,
            status = userPO.status
        )
    }
}
```