# 项目结构文档

## 项目概述
这是一个前后端分离的企业级应用项目，包含后端API服务、前端Web界面、数据库脚本和项目文档。

---

## 目录结构

```
wuzhi/
├── Server/                          # 后端服务（Kotlin + Spring Boot）
│   ├── src/main/kotlin/             # Kotlin源代码
│   │   └── com/wuzhi/server/        # 主包路径
│   │       ├── common/              # 公共模块
│   │       │   ├── config/          # 配置类（AI、JWT、拦截器等）
│   │       │   ├── constant/        # 常量定义
│   │       │   ├── context/         # 上下文对象
│   │       │   ├── exception/       # 异常处理
│   │       │   ├── interceptor/     # 拦截器
│   │       │   ├── pojo/            # 通用返回对象
│   │       │   ├── property/        # 配置属性类
│   │       │   └── util/            # 工具类
│   │       ├── service_chat/        # 聊天服务模块
│   │       │   ├── config/          # 聊天配置
│   │       │   ├── controller/      # 聊天控制器
│   │       │   ├── mapper/          # 数据访问层
│   │       │   ├── pojo/            # 实体类
│   │       │   │   ├── dto/         # 数据传输对象
│   │       │   │   ├── po/          # 持久化对象
│   │       │   │   └── vo/          # 视图对象
│   │       │   ├── prompt/          # 提示词常量
│   │       │   ├── service/         # 服务接口
│   │       │   │   └── impl/        # 服务实现
│   │       │   └── tool/            # MCP工具
│   │       ├── service_company/     # 公司组织管理服务
│   │       │   ├── controller/      # 控制器
│   │       │   │   ├── CompanyController.kt      # 公司管理
│   │       │   │   ├── DepartmentController.kt   # 部门管理
│   │       │   │   ├── EmployeeController.kt     # 员工管理
│   │       │   │   ├── MissionController.kt      # 任务管理
│   │       │   │   └── RoleController.kt         # 角色管理
│   │       │   ├── mapper/          # 数据访问层
│   │       │   │   ├── CompanyMapper.kt
│   │       │   │   ├── DepartmentMapper.kt
│   │       │   │   ├── EmployeeMapper.kt
│   │       │   │   ├── MissionMapper.kt
│   │       │   │   ├── RoleMapper.kt
│   │       │   │   └── ...其他Mapper
│   │       │   ├── pojo/            # 实体类
│   │       │   │   ├── dto/         # DTO（按业务分类）
│   │       │   │   │   ├── company/     # 公司相关DTO
│   │       │   │   │   ├── department/  # 部门相关DTO
│   │       │   │   │   ├── employee/    # 员工相关DTO
│   │       │   │   │   ├── mission/     # 任务相关DTO
│   │       │   │   │   └── role/        # 角色相关DTO
│   │       │   │   ├── po/          # 持久化对象
│   │       │   │   └── vo/          # 视图对象
│   │       │   ├── service/         # 服务接口
│   │       │   └── service/impl/    # 服务实现
│   │       ├── service_tool/        # 工具服务模块
│   │       │   ├── ai/              # AI相关
│   │       │   ├── controller/      # 控制器
│   │       │   │   ├── ConstantListController.kt    # 常量列表
│   │       │   │   ├── DatabaseController.kt        # 数据库管理
│   │       │   │   ├── ToolController.kt            # 工具管理
│   │       │   │   └── ToolUseController.kt         # 工具使用记录
│   │       │   ├── mapper/          # 数据访问层
│   │       │   │   ├── DatabaseMapper.kt
│   │       │   │   ├── TagMapper.kt
│   │       │   │   ├── ToolMapper.kt
│   │       │   │   └── ...其他Mapper
│   │       │   ├── pojo/            # 实体类
│   │       │   │   ├── bo/          # 业务对象
│   │       │   │   ├── dto/         # 数据传输对象
│   │       │   │   ├── po/          # 持久化对象
│   │       │   │   └── vo/          # 视图对象
│   │       │   ├── service/         # 服务接口
│   │       │   ├── service/impl/    # 服务实现
│   │       │   └── util/            # 工具类
│   │       └── service_user/        # 用户认证服务
│   │           ├── controller/      # 认证控制器
│   │           │   └── AuthController.kt
│   │           ├── mapper/          # 用户数据访问层
│   │           ├── pojo/            # 用户实体类
│   │           │   ├── dto/         # 登录、注册DTO
│   │           │   ├── po/          # 用户持久化对象
│   │           │   └── vo/          # 登录返回视图
│   │           ├── service/         # 认证服务接口
│   │           └── service/impl/    # 认证服务实现
│   ├── src/main/resources/        # 资源文件
│   │   └── application.yaml       # Spring Boot配置文件
│   ├── build.gradle.kts           # Gradle构建配置
│   ├── settings.gradle.kts        # Gradle设置
│   ├── gradlew                    # Gradle Wrapper（Unix）
│   └── gradlew.bat                # Gradle Wrapper（Windows）
│
├── Web/                           # 前端项目（Vue 3 + TypeScript）
│   ├── public/                    # 静态资源
│   │   ├── favicon.ico
│   │   └── icons/                 # 图标
│   │       ├── Email.svg
│   │       ├── Phone.svg
│   │       ├── QQ.svg
│   │       └── WeChat.svg
│   ├── src/                       # 源代码
│   │   ├── Api/                   # API接口
│   │   │   ├── AuthApi.ts         # 认证相关API
│   │   │   ├── ChatApi.ts         # 聊天相关API
│   │   │   ├── DatabaseApi.ts     # 数据库相关API
│   │   │   ├── ToolApi.ts         # 工具相关API
│   │   │   └── company/           # 公司管理API
│   │   │       ├── CompanyApi.ts
│   │   │       ├── DepartmentApi.ts
│   │   │       ├── EmployeeApi.ts
│   │   │       ├── MissionApi.ts
│   │   │       └── RoleApi.ts
│   │   ├── Assets/                # 资源文件
│   │   │   ├── logo.png
│   │   │   ├── logo(with_name).png
│   │   │   ├── qq-qrcode.png
│   │   │   ├── text.png
│   │   │   └── wechat-qrcode.png
│   │   ├── Config/                # 配置
│   │   │   ├── ApiConfig.ts       # API配置
│   │   │   └── DataConfig.ts      # 数据配置
│   │   ├── Entity/                # 实体类型定义
│   │   │   ├── AuthEntity.ts      # 认证实体
│   │   │   ├── ChatEntity.ts      # 聊天实体
│   │   │   ├── DatabaseEntity.ts  # 数据库实体
│   │   │   ├── ToolEntity.ts      # 工具实体
│   │   │   └── company/           # 公司管理实体
│   │   │       ├── CompanyEntity.ts
│   │   │       ├── DepartmentEntity.ts
│   │   │       ├── EmployeeEntity.ts
│   │   │       ├── MissionEntity.ts
│   │   │       └── RoleEntity.ts
│   │   ├── Router/                # 路由配置
│   │   │   └── index.ts
│   │   ├── Stores/                # Pinia状态管理
│   │   │   ├── AuthStore.ts       # 认证状态
│   │   │   ├── ThemeStore.ts      # 主题状态
│   │   │   └── UserStore.ts       # 用户状态
│   │   ├── Styles/                # 全局样式
│   │   │   └── global.css
│   │   ├── Util/                  # 工具函数
│   │   │   ├── AxiosUtil.ts       # Axios封装
│   │   │   ├── TimeFormatUtil.ts  # 时间格式化
│   │   │   └── UuidUtil.ts        # UUID生成
│   │   ├── Views/                 # 页面组件
│   │   │   ├── Company/           # 公司管理
│   │   │   │   ├── index.vue
│   │   │   │   ├── BasicLayout/   # 基础布局
│   │   │   │   │   ├── CompanyAddDialog.vue
│   │   │   │   │   ├── CompanyContent.vue
│   │   │   │   │   ├── CompanyMenuList.vue
│   │   │   │   │   └── CompanySelect.vue
│   │   │   │   └── Components/    # 业务组件
│   │   │   │       ├── EmployeeManager.vue
│   │   │   │       ├── ToolUse.vue
│   │   │   │       ├── BaseInfo/  # 基本信息
│   │   │   │       │   ├── BaseInfo.vue
│   │   │   │       │   └── Schedule.vue
│   │   │   │       └── DatabaseManager/  # 数据库管理
│   │   │   │           ├── DatabaseManager.vue
│   │   │   │           └── components/
│   │   │   │               ├── AddDatabaseDialog.vue
│   │   │   │               ├── DatabaseDetail.vue
│   │   │   │               ├── DatabaseTree.vue
│   │   │   │               └── FilePreview.vue
│   │   │   ├── DataCenter/      # 数据中心
│   │   │   │   ├── index.vue
│   │   │   │   └── components/
│   │   │   │       ├── EditDialog.vue
│   │   │   │       ├── KnowledgeTree.vue
│   │   │   │       └── ToolUsageRecord.vue
│   │   │   ├── History/         # 历史记录
│   │   │   │   ├── index.vue
│   │   │   │   └── HistoryList.vue
│   │   │   ├── Home/            # 首页
│   │   │   │   ├── index.vue
│   │   │   │   └── Universe.vue
│   │   │   ├── Login/           # 登录
│   │   │   │   └── index.vue
│   │   │   ├── New/             # 新建
│   │   │   │   ├── index.vue
│   │   │   │   └── Menu.vue
│   │   │   ├── PublicComponents/  # 公共组件
│   │   │   │   ├── ChatArea.vue
│   │   │   │   ├── LogoBox.vue
│   │   │   │   ├── ProfileDialog.vue
│   │   │   │   ├── Sidebar.vue
│   │   │   │   ├── ThemeToggle.vue
│   │   │   │   └── TreeLayout.vue
│   │   │   ├── Register/        # 注册
│   │   │   │   └── index.vue
│   │   │   └── ToolCenter/      # 工具中心
│   │   │       ├── index.vue
│   │   │       └── components/
│   │   │           ├── ToolCard.vue
│   │   │           ├── ToolDetailDialog.vue
│   │   │           ├── ToolEditForm.vue
│   │   │           ├── ToolFilterPanel.vue
│   │   │           ├── ToolMarketSidebar.vue
│   │   │           └── ToolPurchaseDialog.vue
│   │   ├── App.vue                # 根组件
│   │   └── main.ts                # 入口文件
│   ├── dist/                      # 构建输出（生产环境）
│   ├── index.html                 # HTML模板
│   ├── package.json               # 依赖配置
│   ├── vite.config.ts            # Vite配置
│   └── tsconfig*.json            # TypeScript配置
│
├── database/                      # 数据库相关
│   └── create_tables.sql         # 数据库建表脚本
│
├── docs/                          # 项目文档
│   ├── 修复方案修正说明.md
│   ├── 后端功能性问题修复文档.md
│   ├── 后端非紧急优化问题清单.md
│   ├── 用户体验审查报告.md
│   └── 项目审查报告.md
│
├── .codebuddy/                    # 配置文件目录
│   └── .rules/                   # 项目规则
│       ├── Mybatis-plus使用规则.mdc
│       ├── PiniaStoreUsageRules.mdc
│       └── project-coding-and-comment-standards.mdc
│
└── command_setup.sh              # 环境配置脚本
```

---

## 技术栈

### 后端
- **语言**: Kotlin
- **框架**: Spring Boot
- **构建工具**: Gradle
- **数据库**: MySQL（通过MyBatis-Plus访问）
- **AI集成**: 支持MCP协议，向量数据库
- **认证**: JWT（JSON Web Token）

### 前端
- **框架**: Vue 3（Composition API）
- **语言**: TypeScript
- **构建工具**: Vite
- **状态管理**: Pinia
- **路由**: Vue Router
- **HTTP客户端**: Axios
- **UI组件**: 自定义组件库

---

## 核心模块说明

### 1. service_chat（聊天服务）
- 提供AI对话功能
- 支持多模型切换
- 对话历史管理
- MCP工具集成
- 提示词管理

### 2. service_company（公司组织管理）
- 公司信息管理
- 部门组织架构
- 员工档案管理
- 角色权限系统
- 任务分配与跟踪

### 3. service_tool（工具服务）
- 工具市场
- 数据库管理
- 知识库管理
- 工具使用记录
- 文档向量化处理

### 4. service_user（用户认证）
- 用户注册/登录
- JWT认证
- 用户行为记录
- 权限验证

---

## 配置文件位置

### 后端配置
- `Server/src/main/resources/application.yaml` - Spring Boot主配置

### 前端配置
- `Web/src/Config/ApiConfig.ts` - API基础配置
- `Web/src/Config/DataConfig.ts` - 数据配置
- `Web/vite.config.ts` - 构建工具配置

### 项目规范
- `.codebuddy/.rules/` - 包含代码规范、注释标准、框架使用规则等

---

## 构建与运行

### 后端
```bash
cd Server
./gradlew bootJar          # 构建JAR包
./gradlew bootRun          # 运行服务
```

### 前端
```bash
cd Web
npm install                # 安装依赖
npm run dev                # 开发模式
npm run build              # 生产构建
```

---

## 数据库初始化

执行以下脚本创建数据库表结构：
```bash
mysql -u username -p database_name < database/create_tables.sql
```

---

**文档生成时间**: 2026-01-12
**项目位置**: d:/Data/wuzhi
